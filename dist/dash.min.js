/*! dash - v0.1.0 - 2014-04-26
* https://github.com/joshuajones/dash
* Copyright (c) 2014 Joshua Jones; Licensed MIT */
!function(a){function b(b,e){var f=this;return this.el=b,this.$el=a(b),this.settings=a.extend({},d,e),this.wrapper=this.$el.children(),this.slides=this.wrapper.children(),this.currentSlide=0,this._defaults=d,this._name=c,this.init(),this.build(),this.autoPlay(),this.settings.deepLinking&&this.pageLoadSlide(),a.each(this.settings,a.proxy(function(a,b){"function"==typeof b&&this.$el.on(a+".dash",b)},this)),{currentSlide:function(){return-(f.currentSlide-1)},next:function(a){f.slide(1,!1,a)},prev:function(a){f.slide(-1,!1,a)},goTo:function(a,b){f.slide(a-1,!0,b)},autoPlay:function(){f.autoPlay()},autoPause:function(){f.autoPause()}}}var c="dash",d={animationTime:400,autoplay:!1,nav:!0,navWrapClass:"dash-nav",navItemClass:"dash-nav-item",navItemActiveClass:"dash-nav-item-active",controls:!0,controlsWrapClass:"dash-controls",controlsLeftClass:"dash-controls-left",controlsRightClass:"dash-controls-right",deepLinking:!0,keyControls:!0,keymap:{prev:37,next:39,first:38,last:40},pauseOnHover:!0};b.prototype={init:function(){var b=this.settings.keymap;this.wrapper.width(this.slides.length*this.slides.width()),this.settings.keyControls&&a(document).on("keyup",a.proxy(function(a){a.keyCode===b.prev&&this.slide(-1,!1),a.keyCode===b.next&&this.slide(1,!1),a.keyCode===b.first&&this.slide(0,!0),a.keyCode===b.last&&this.slide(this.slides.length-1,!0)},this)),this.settings.pauseOnHover&&this.$el.add(this.nav).add(this.controls).on("mouseover mouseout",a.proxy(function(a){this.autoPause(),"mouseout"===a.type&&this.autoPlay()},this))},build:function(){this.settings.nav&&this.nav(),this.settings.controls&&this.controls()},nav:function(){if(this.slides.length>1){var b,c,d;b=this.navWrapper=a("<div />",{"class":this.settings.navWrapClass}).appendTo(this.el);for(var e=0,f=this.slides.length;f>e;e++)d=a("<span />",{"class":this.settings.navItemClass,"data-distance":e,html:e}).appendTo(b);c=b.children(),c.eq(0).addClass(this.settings.navItemActiveClass),c.on("click",a.proxy(function(b){this.slide(a(b.target).data("distance"),!0),b.preventDefault()},this))}},controls:function(){if(this.slides.length>1){var b,c;b=this.controlsWrapper=a("<div />",{"class":this.settings.controlsWrapClass}).appendTo(this.el),b.left=a("<span />",{"class":this.settings.controlsLeftClass,"data-distance":-1,html:"Prev"}).appendTo(b),b.right=a("<span />",{"class":this.settings.controlsRightClass,"data-distance":1,html:"Next"}).appendTo(b),c=b.children(),c.on("click",a.proxy(function(b){this.slide(a(b.target).data("distance")),b.preventDefault()},this))}},slide:function(b,c,d){var e,f,g=c||!1,h=g?0:this.currentSlide,i=-(this.slides.length-1);this.$el.trigger("before.dash"),this.autoPause(),0===h&&-1===b?h=i:h===i&&1===b?h=0:h+=-b,f=this.slides.width()*h+"px",this.wrapper.stop().animate({"margin-left":f},this.animationTime,a.proxy(function(){this.$el.trigger("after.dash")},this)),this.nav&&this.navWrapper.children().removeClass(this.settings.navItemActiveClass).eq(-h).addClass(this.settings.navItemActiveClass),this.currentSlide=h,"undefined"!==d&&"function"==typeof d&&d(),this.settings.deepLinking&&(e=-(h-1),window.history.replaceState("","","#"+e)),this.autoPlay()},autoPlay:function(){this.settings.autoplay&&(this.auto=setInterval(a.proxy(function(){this.slide(1)},this),this.settings.autoplay))},autoPause:function(){this.settings.autoplay&&(this.auto=clearInterval(this.auto))},pageLoadSlide:function(){var a=document.location.hash.replace("#","");""!==a&&a<=this.slides.length&&a>0&&this.slide(a-1,!0)}},a.fn[c]=function(d){return this.each(function(){a.data(this,"api_"+c)||a.data(this,"api_"+c,new b(this,d))})}}(jQuery);
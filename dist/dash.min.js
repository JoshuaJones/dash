/*! dash - v0.1.0 - 2013-12-02
* https://github.com/joshuajones/dash
* Copyright (c) 2013 Joshua Jones; Licensed MIT */
!function(a){function b(b,e){var f=this;return this.el=b,this.$el=a(b),this.settings=a.extend({},d,e),this.wrapper=this.$el.children(),this.slides=this.wrapper.children(),this.currentSlide=0,this._defaults=d,this._name=c,this.init(),this.build(),this.autoPlay(),a.each(this.settings,function(a,b){"function"==typeof b&&this.$el.on(a+".dash",b)}.bind(this)),{next:function(a){f.slide(1,!1,a)},prev:function(a){f.slide(-1,!1,a)},goTo:function(a,b){f.slide(a-1,!0,b)},autoPlay:function(){f.autoPlay()},autoPause:function(){f.autoPause()}}}Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var c="dash",d={animationTime:400,autoplay:!1,nav:!0,navWrapClass:"dash-nav",navItemClass:"dash-nav-item",navItemActiveClass:"dash-nav-item-active",controls:!0,controlsWrapClass:"dash-controls",controlsLeftClass:"dash-controls-left",controlsRightClass:"dash-controls-right",keyControls:!0,keymap:{prev:37,next:39,first:38,last:40},pauseOnHover:!0};b.prototype={init:function(){var b=this.settings.keymap;this.wrapper.width(this.slides.length*this.slides.width()),this.settings.keyControls&&a(document).on("keyup",function(a){a.keyCode===b.prev&&this.slide(-1,!1),a.keyCode===b.next&&this.slide(1,!1),a.keyCode===b.first&&this.slide(0,!0),a.keyCode===b.last&&this.slide(this.slides.length-1,!0)}.bind(this)),this.settings.pauseOnHover&&this.$el.add(this.nav).add(this.controls).on("mouseover mouseout",function(a){this.autoPause(),"mouseout"===a.type&&this.autoPlay()}.bind(this))},build:function(){this.settings.nav&&this.nav(),this.settings.controls&&this.controls()},nav:function(){if(this.slides.length>1){var b,c,d;b=this.navWrapper=a("<div />",{"class":this.settings.navWrapClass}).appendTo(this.el);for(var e=0,f=this.slides.length;f>e;e++)d=a("<span />",{"class":this.settings.navItemClass,"data-distance":e,html:e}).appendTo(b);c=b.children(),c.eq(0).addClass(this.settings.navItemActiveClass),c.on("click",function(b){this.slide(a(b.target).data("distance"),!0),b.preventDefault()}.bind(this))}},controls:function(){if(this.slides.length>1){var b,c;b=this.controlsWrapper=a("<div />",{"class":this.settings.controlsWrapClass}).appendTo(this.el),b.left=a("<span />",{"class":this.settings.controlsLeftClass,"data-distance":-1,html:"Prev"}).appendTo(b),b.right=a("<span />",{"class":this.settings.controlsRightClass,"data-distance":1,html:"Next"}).appendTo(b),c=b.children(),c.on("click",function(b){this.slide(a(b.target).data("distance")),b.preventDefault()}.bind(this))}},slide:function(a,b,c){var d,e=b||!1,f=e?0:this.currentSlide,g=-(this.slides.length-1);this.$el.trigger("before.dash"),this.autoPause(),0===f&&-1===a?f=g:f===g&&1===a?f=0:f+=-a,d=this.slides.width()*f+"px",this.wrapper.stop().animate({"margin-left":d},this.animationTime,function(){this.$el.trigger("after.dash")}.bind(this)),this.nav&&this.navWrapper.children().removeClass(this.settings.navItemActiveClass).eq(-f).addClass(this.settings.navItemActiveClass),this.currentSlide=f,"undefined"!==c&&"function"==typeof c&&c(),this.autoPlay()},autoPlay:function(){this.settings.autoplay&&(this.auto=setInterval(function(){this.slide(1)}.bind(this),this.settings.autoplay))},autoPause:function(){this.settings.autoplay&&(this.auto=clearInterval(this.auto))}},a.fn[c]=function(d){return this.each(function(){a.data(this,"api_"+c)||a.data(this,"api_"+c,new b(this,d))})}}(jQuery);